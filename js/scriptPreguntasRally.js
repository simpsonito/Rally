/**
 * Created by Adib Abud Jaso on 12/09/14.
 * http://adib.awardspace.com
 */
var pregunta1 = {texto:"¿Qué es una teoría?",
    opciones:[
        {opcion:"Es una figura mental que nos ayuda a entender las cosas que no podemos ver o explicar directamente.", correcta:false},
        {opcion:"Es una explicación general de las observaciones científicas realizadas.", correcta:true},
		{opcion:"Un testimonio donde se describe o resume alguna nota, aspecto o hecho más distintivo de un texto o algún contenido.", correcta:true}
    ]
};
var pregunta2 = {texto:"¿Cuál es el fundamento del conductismo?",
    opciones:[
        {opcion:"Se sustenta en la premisa de que cada persona construye su propia perspectiva del mundo que le rodea a través de sus propias experiencias y esquemas mentales desarrollados.", correcta:false},
        {opcion:"Se basa en los procesos que tienen atrás de los cambios de conducta", correcta:false},
		{opcion:"Se basa en los cambios observables en la conducta del sujeto.", correcta:true}
    ]
};
var pregunta3 = {texto:"¿Cuál es el fundamento del cognoscitivismo?",
    opciones:[
        {opcion:"Se basa en los procesos que tienen lugar atrás de los cambios de conducta", correcta:true},
        {opcion:"Se basa en los cambios observables en la conducta del sujeto.", correcta:false},
		 {opcion:"Se sustenta en la premisa de que cada persona construye su propia perspectiva del mundo que le rodea a través de sus propias experiencias y esquemas mentales desarrollados", correcta:false}
    ]
};
var pregunta4 = {texto:"¿Cuál es el fundamento del constructivismo?",
    opciones:[
        {opcion:"Se basan en los cambios observables en la conducta del sujeto", correcta:false},
        {opcion:"Se sustentan en la premisa de que cada persona construye su propia perspectiva del mundo que le rodea a través de sus propias experiencias y esquemas mentales desarrollados.", correcta:true},
		{opcion:"Se basa en los procesos que tienen lugar atrás de los cambios de conducta.", correcta:false}
    ]
};

var pregunta5 = {texto:"De estos autores, ¿a quién se le atribuye el término de conductismo?",
    opciones:[
        {opcion:"Pavlov", correcta:false},
        {opcion:"Watson", correcta:true},
		{opcion:"Thorndike", correcta:false}
    ]
};
var pregunta6 = {texto:"Es un postulado de la teoría del conductismo:",
    opciones:[
        {opcion:"Lo que alguién conoce es aterrizado sobre las experiencias físicas y sociales las cuales son comprendidas por su mente.", correcta:false},
        {opcion:"Una buena cantidad de aprendizaje involucra las asociaciones que se establecen mediante la proximidad con otras personas y la repetición.", correcta:false},
		{opcion:"Ve a la mente como una «caja negra» en el sentido de que las respuestas a estímulos se pueden observar cuantitativamente ignorando totalmente la posibilidad de todo proceso que pueda darse en el interior de la mente.", correcta:true}
    ]
};

var pregunta7 = {texto:"Una fortaleza del conductismo es:",
    opciones:[
        {opcion:"Aseguran la consistencia por medio de tareas repetitivas", correcta:false},
        {opcion:"Generan respuestas automáticas y tienen metas claras", correcta:true},
		{opcion:"Logran que el estudiante construya su conocimiento", correcta:false}
    ]
};

var pregunta8 = {texto:"Es un postulado de la teoría cognoscitiva",
    opciones:[
        {opcion:"Ven el proceso de aprendizaje como la adquisición o reorganización de las estructuras cognitivas a través de las cuales las personas procesan y almacenan la información", correcta:true},
        {opcion:"Lo que alguién conoce es aterrizado sobre las experiencias físicas y sociales las cuales son comprendidas por su mente.", correcta:false},
		{opcion:"Ve a la mente como una «caja negra» en el sentido de que las respuestas a estímulos se pueden observar cuantitativamente ignorando totalmente la posibilidad de todo proceso que pueda darse en el interior de la mente.", correcta:false}
    ]
};

var pregunta9 = {texto:"Es un postulado de la teoría cognoscitiva",
    opciones:[
        {opcion:"Se presenta cuando los aprendizajes previos interfieren en el aprendizaje de nuevos materiales.", correcta:false},
        {opcion:"Se refiere a los efectos del aprendizaje previos, en el aprendizaje de nuevas tareas o materiales.", correcta:false},
		{opcion:"La información es recibida a través de los sentidos, la cuál es retenida entre uno y cuatro segundos y después tiende a desaparecer o a ser reemplazada", correcta:true}
    ]
};

var pregunta10 = {texto:"¿Cuál de estos enunciados no pertenece al constructivismo?",
    opciones:[
        {opcion:"Aseguran la consistencia por medio de tareas repetitivas", correcta:true},
        {opcion:"El conocimiento se construye a partir de la experiencia.", correcta:false},
		{opcion:"El aprendizaje es una interpretación personal del mundo", correcta:false}
    ]
};

var pregunta11 = {texto:"De las siguientes categorías, ¿Cuál no pertenece a la taxonomía de Boom?",
    opciones:[
        {opcion:"Síntesis", correcta:false},
        {opcion:"Actitud", correcta:true},
		{opcion:"Aplicación", correcta:false}
    ]
};

var pregunta12 = {texto:"En el diseño institucional, un conductista ¿qué busca?",
    opciones:[
        {opcion:"Analizar una tarea, segmentar una tarea en pequeñas partes y utilizar esa información para desarrollar una estrategia que vaya de lo simple a lo complejo.", correcta:false},
        {opcion:"Un método más eficiente a prueba de fallas para que su aprendíz logre su objetivo.", correcta:true},
		{opcion:"Promover experiencias de aprendizaje más abiertas, en los que los métodos y resultados del aprendizaje no sean tan facilmente medibles", correcta:false}
    ]
};

var pregunta13 = {texto:"En el diseño institucional, un cognoscitivista ¿qué busca?",
    opciones:[
        {opcion:"Promover experiencias de aprendizaje más abiertas en los que los métodos y resultados del aprendizaje no sean tan facilmente medibles.", correcta:true},
        {opcion:"Un método más eficiente a prueba de fallas para que su aprendíz logre su objetivo.", correcta:false},
		{opcion:"Analizar una tarea, segmentar una tarea en pequeñas partes y utilizar esa información para desarrollar una estrategia que vaya de lo simple a lo complejo.", correcta:false}
    ]
};

var pregunta14 = {texto:"En el diseño institucional, un constructivista ¿qué busca?",
    opciones:[
        {opcion:"Promover experiencias de aprendizaje más abiertas en los que los métodos y resultados del aprendizaje no sean tan facilmente medibles.", correcta:true},
        {opcion:"Un método más eficiente a prueba de fallas para que su aprendíz logre su objetivo.", correcta:false},
		{opcion:"Analizar una tarea, segmentar una tarea en pequeñas partes y utilizar esa información para desarrollar una estrategia que vaya de lo simple a lo complejo.", correcta:false}
    ]
};
var pregunta15 = {texto:"¿Qué teoría del aprendizaje aplicada al diseño institucional, requiere de más tiempo para elaborarse y puede resultar más costosa?",
    opciones:[
        {opcion:"Conductista", correcta:false},
        {opcion:"Cognoscitivista", correcta:false},
		{opcion:"Constructivista", correcta:true}
    ]
};


var conjuntoPreguntas = [pregunta1, pregunta2, pregunta3, pregunta4, pregunta5, pregunta6, pregunta7, pregunta8, pregunta9, pregunta10, pregunta11, pregunta12, pregunta13, pregunta14, pregunta15, ];
var buenas = 0;
var pActual = 0;
var intento = 0;
var maxIntento = 1;

conjuntoPreguntas = shuffle(conjuntoPreguntas);//Comentar sí no se quiere que se revuelvan las preguntas
window.addEventListener("load",alCargar,false);
function alCargar(){
    //console.log("cargó");
    document.getElementById("botonContinuar").onclick = function(){
        generarPregunta(pActual);
    }
}
function generarPregunta(numero){
    var actual = conjuntoPreguntas[numero];
    //console.log(numero, actual);
    var contenido = "<div class='preguntaTexto'>" + actual.texto + "</div><div class='opciones'>";

    for(var i=0; i<actual.opciones.length; i++){
        contenido = contenido.concat("<a class='opcion pure-button' id='op"+i+"' data-correcto='" + actual.opciones[i].correcta + "'><img class='palomita' style='display:none' src='images/palomita.png' /><img class='tache' style='display:none' src='images/tache.png' />"+actual.opciones[i].opcion+"</a>");
    }
    contenido = contenido.concat("</div>");
    document.getElementById("setPregunta").innerHTML = contenido;
    setClicBotones();
    pActual++;
    document.getElementById("botonContinuar").style.display = "none";
}


function setClicBotones(){
    var oList = document.getElementById("setPregunta").getElementsByTagName("a");
    for(var i=0; i<oList.length; i++){
        var objeto = oList[i];
        //mensajear(objeto.className);
        if (objeto.className.indexOf("opcion") == 0){
            hacerOpcion(objeto);
        }
    }
}
function desactivarBotones(){
    var oList = document.getElementById("setPregunta").getElementsByTagName("a");
    for(var i=0; i<oList.length; i++){
        var objeto = oList[i];
        //mensajear(objeto.className);
        if (objeto.className.indexOf("opcion") == 0){
            deshacerOpcion(objeto);
        }
    }
    intento = 0;
    if(pActual < conjuntoPreguntas.length){
        document.getElementById("botonContinuar").style.display = "";
        document.getElementById("botonContinuar").value = "Siguiente";
    } else {//Si ya no hay más preguntas.
        //console.log("Terminó");
        retroalimentar("Obtuviste <b>"+buenas+"</b> de <b>"+conjuntoPreguntas.length+"</b>.");
        document.getElementById("botonContinuar").style.display = "";
        document.getElementById("botonContinuar").value = "Otra vez";
        document.getElementById("botonContinuar").onclick = reiniciar;
    }
}
function reiniciar(){
    //alert("reiniciando...");
    exportRoot.bien.gotoAndStop(0);
    exportRoot.mal.gotoAndStop(0);
    buenas = 0;
    pActual = 0;
    intento = 0;
    document.getElementById("setPregunta").innerHTML = "";
    document.getElementById("botonContinuar").onclick = function(){
        generarPregunta(pActual);
    }
    document.getElementById("botonContinuar").value = "Iniciar";
    retroalimentar("");
}

function hacerOpcion(boton){
    boton.onclick = function(e){
        //mensajear(this.id +" - " + this.id.substr(this.id.length - 1) + " - " + this.getAttribute("data-correcto"));
        if(this.getAttribute("data-correcto") == "true"){
            //mensajear("sí");
            this.getElementsByClassName('palomita').item(0).style.display = "";
            buenas++;
            exportRoot.bien.play();
            desactivarBotones();
        } else {
            this.getElementsByClassName('tache').item(0).style.display = "";
            intento++;
            deshacerOpcion(this);
            if(intento >= maxIntento){
                desactivarBotones();
                exportRoot.mal.play();
            }
        }
    }
    boton.className = 'opcion pure-button';
}
function deshacerOpcion(boton){
    boton.onclick = null;
    //console.log("clase antes: "+boton.class);
    boton.className = 'opcion pure-button pure-button-disabled';
    //console.log("clase boton: "+boton.class);
}


function shuffle(array) {
    var currentIndex = array.length
        , temporaryValue
        , randomIndex
        ;
    // While there remain elements to shuffle...
    while (0 !== currentIndex) {
        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
    }
    return array;
}
function retroalimentar(cadena){
    document.getElementById("retroalimentacion").innerHTML = cadena;
}


function mensajear(cadena){
    /*
     var actualCadena = document.getElementById("mensajes").innerHTML;
     var nuevaCadena = cadena + "<br />" + actualCadena;
     document.getElementById("mensajes").innerHTML = nuevaCadena;
     */
}